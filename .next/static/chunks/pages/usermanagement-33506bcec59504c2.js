(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[453],{7138:function(e,r,t){"use strict";t.d(r,{Z:function(){return h}});var a=t(7294),o=t(29),n=t(4687),l=t.n(n),s=t(1664),d=t.n(s),i=t(5675),c=t.n(i),f=t(7066),b=t(1163),u=t(5893);function p(e){var r,t=e.user,n=(0,b.useRouter)(),s=(r=(0,o.Z)(l().mark(function e(){var r,a;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.Z.post("/api/auth/signout",{},{headers:{Authorization:"Bearer ".concat(null==t?void 0:t.token)}});case 3:null!=(a=e.sent)&&null!==(r=a.data)&&void 0!==r&&r._id&&n.push("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error signout=========>",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(){return r.apply(this,arguments)}),i=(0,a.useState)(!1),p=i[0],h=i[1];return(0,u.jsxs)("nav",{className:"bg-white p-4 border-b border-[#d6cffe]",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center",children:[(0,u.jsx)(d(),{href:"/",children:(0,u.jsx)(c(),{src:"../public/jhinthicha.svg",width:100,height:100,alt:"logo"})}),(0,u.jsx)("div",{className:"md:hidden",children:(0,u.jsx)("button",{id:"menu",className:"text-[#6e59e7]",onClick:function(){h(!p)},children:(0,u.jsx)("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",className:"w-6 h-6",children:(0,u.jsx)("path",{d:"M4 6h16M4 12h16M4 18h16"})})})}),(0,u.jsx)("ul",{className:"hidden md:flex items-center space-x-4",children:null!=t&&t._id?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("li",{className:"relative group",children:[(0,u.jsx)(d(),{href:"/",className:"text-[#6e59e7] text-lg font-normal my-2",children:"Request Form"}),(0,u.jsx)("span",{className:"absolute -bottom-1 left-1/2 w-0 transition-all h-[2px] bg-[#816def] group-hover:w-1/2"}),(0,u.jsx)("span",{className:"absolute -bottom-1 right-1/2 w-0 transition-all h-[2px] bg-[#816def] group-hover:w-1/2"})]}),(0,u.jsxs)("li",{className:"relative group",children:[(0,u.jsx)(d(),{href:"/requestmanagement",className:"text-[#6e59e7] text-lg font-normal my-2",children:"Request Management"}),(0,u.jsx)("span",{className:"absolute -bottom-1 left-1/2 w-0 transition-all h-[2px] bg-[#816def] group-hover:w-1/2"}),(0,u.jsx)("span",{className:"absolute -bottom-1 right-1/2 w-0 transition-all h-[2px] bg-[#816def] group-hover:w-1/2"})]}),(0,u.jsxs)("li",{className:"relative group",children:[(0,u.jsx)(d(),{href:"/usermanagement",className:"text-[#6e59e7] text-lg font-normal my-2",children:"User Management"}),(0,u.jsx)("span",{className:"absolute -bottom-1 left-1/2 w-0 transition-all h-[2px] bg-[#816def] group-hover:w-1/2"}),(0,u.jsx)("span",{className:"absolute -bottom-1 right-1/2 w-0 transition-all h-[2px] bg-[#816def] group-hover:w-1/2"})]}),(0,u.jsx)("li",{className:"w-5"}),(0,u.jsx)("li",{className:"relative",children:(0,u.jsx)("button",{className:"relative flex h-[40px] w-[80px] items-center justify-center overflow-hidden bg-[#816def] font-medium text-white transition-all duration-300 before:absolute before:inset-0 before:border-0 before:border-white before:duration-100 before:ease-linear hover:bg-white hover:text-[#6e59e7] hover:before:border-[25px]",onClick:s,children:(0,u.jsx)("span",{className:"relative z-10",children:"Logout"})})})]}):null})]}),p?(0,u.jsx)("ul",{className:"flex-col md:hidden",children:null!=t&&t._id?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("li",{className:"py-3 ",children:(0,u.jsx)(d(),{href:"/",className:"text-[#6e59e7] text-lg font-normal my-2 active:text-[#5d47da]",children:"Request Form"})}),(0,u.jsx)("li",{className:"py-3",children:(0,u.jsx)(d(),{href:"/requestmanagement",className:"text-[#6e59e7] text-lg font-normal my-2 active:text-[#5d47da]",children:"Request Management"})}),(0,u.jsx)("li",{className:"py-3",children:(0,u.jsx)(d(),{href:"/usermanagement",className:"text-[#6e59e7] text-lg font-normal my-2 active:text-[#5d47da]",children:"User Management"})}),(0,u.jsx)("li",{className:"w-5"}),(0,u.jsx)("li",{className:"py-3",children:(0,u.jsx)("button",{className:"relative flex h-[40px] w-[80px] items-center justify-center overflow-hidden bg-[#816def] font-medium text-white transition-all duration-300 before:absolute before:inset-0 before:border-0 before:border-white before:duration-100 before:ease-linear hover:bg-white hover:text-[#6e59e7] hover:before:border-[25px]",onClick:s,children:(0,u.jsx)("span",{className:"relative z-10",children:"Logout"})})})]}):null}):null]})}var h=function(e){var r=e.children,t=e.user;return(0,u.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,u.jsx)(p,{user:t}),r]})}},6096:function(e,r,t){"use strict";t.r(r),t.d(r,{__N_SSP:function(){return v},default:function(){return j}});var a=t(29),o=t(4687),n=t.n(o),l=t(7294),s=t(7138),d=t(8307),i=t(8322),c=t(8737),f=t(5893);function b(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,a)}return t}function u(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?b(Object(t),!0).forEach(function(r){(0,d.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function p(e){var r,t=e.user,o=e.onClose,s=e.onUpdate,b=(0,l.useState)(!1),p=b[0],h=b[1],x=(0,l.useState)({firstName:"",lastName:"",email:"",phone:""}),m=x[0],g=x[1];(0,l.useEffect)(function(){t&&g({firstName:t.firstName,lastName:t.lastName,email:t.email,phone:t.phone})},[t]);var w=function(e){var r=e.target,t=r.name,a=r.value;g(function(e){return u(u({},e),{},(0,d.Z)({},t,a))})},v=(r=(0,a.Z)(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.prev=1,e.next=4,s(u(u({},t),m));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error("Update error",e.t0);case 9:return e.prev=9,h(!1),o(),e.finish(9);case 13:case"end":return e.stop()}},e,null,[[1,6,9,13]])})),function(){return r.apply(this,arguments)});return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(i.Z,{open:!0,title:"Edit",centered:!0,onOk:v,onCancel:function(){o()},className:"sm:max-w-[425px]",footer:[(0,f.jsx)(c.ZP,{onClick:function(){g({firstName:t.firstName,lastName:t.lastName,email:t.email,phone:t.phone})},children:"Reset"},"reset"),(0,f.jsx)(c.ZP,{loading:p,onClick:v,className:"bg-[#6e59e7] text-white",children:"Submit"},"submit")],children:(0,f.jsxs)("form",{className:"text-sm flex flex-col gap-4 mt-4 ",children:[(0,f.jsxs)("div",{class:"relative w-full min-w-[200px] h-10",children:[(0,f.jsx)("input",{type:"text",name:"firstName",value:m.firstName,onChange:w,className:"peer w-full h-full bg-transparent text-blue-gray-700 font-sans font-normal outline outline-0 focus:outline-0 disabled:bg-blue-gray-50 disabled:border-0 transition-all placeholder-shown:border placeholder-shown:border-blue-gray-200 placeholder-shown:border-t-blue-gray-200 border focus:border-2 border-t-transparent focus:border-t-transparent text-sm px-3 py-2.5 rounded-[7px] border-blue-gray-200 focus:border-[#6e59e7]",placeholder:" "}),(0,f.jsx)("label",{class:"flex w-full h-full select-none pointer-events-none absolute left-0 font-normal !overflow-visible truncate peer-placeholder-shown:text-blue-gray-500 leading-tight peer-focus:leading-tight peer-disabled:text-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500 transition-all -top-1.5 peer-placeholder-shown:text-sm text-[11px] peer-focus:text-[11px] before:content[' '] before:block before:box-border before:w-2.5 before:h-1.5 before:mt-[6.5px] before:mr-1 peer-placeholder-shown:before:border-transparent before:rounded-tl-md before:border-t peer-focus:before:border-t-2 before:border-l peer-focus:before:border-l-2 before:pointer-events-none before:transition-all peer-disabled:before:border-transparent after:content[' '] after:block after:flex-grow after:box-border after:w-2.5 after:h-1.5 after:mt-[6.5px] after:ml-1 peer-placeholder-shown:after:border-transparent after:rounded-tr-md after:border-t peer-focus:after:border-t-2 after:border-r peer-focus:after:border-r-2 after:pointer-events-none after:transition-all peer-disabled:after:border-transparent peer-placeholder-shown:leading-[3.75] text-gray-500 peer-focus:text-[#6e59e7] before:border-blue-gray-200 peer-focus:before:!border-[#6e59e7] after:border-blue-gray-200 peer-focus:after:!border-[#6e59e7]",children:"First Name"})]}),(0,f.jsxs)("div",{class:"relative w-full min-w-[200px] h-10",children:[(0,f.jsx)("input",{type:"text",name:"lastName",value:m.lastName,onChange:w,className:"peer w-full h-full bg-transparent text-blue-gray-700 font-sans font-normal outline outline-0 focus:outline-0 disabled:bg-blue-gray-50 disabled:border-0 transition-all placeholder-shown:border placeholder-shown:border-blue-gray-200 placeholder-shown:border-t-blue-gray-200 border focus:border-2 border-t-transparent focus:border-t-transparent text-sm px-3 py-2.5 rounded-[7px] border-blue-gray-200 focus:border-[#6e59e7]",placeholder:" "}),(0,f.jsx)("label",{class:"flex w-full h-full select-none pointer-events-none absolute left-0 font-normal !overflow-visible truncate peer-placeholder-shown:text-blue-gray-500 leading-tight peer-focus:leading-tight peer-disabled:text-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500 transition-all -top-1.5 peer-placeholder-shown:text-sm text-[11px] peer-focus:text-[11px] before:content[' '] before:block before:box-border before:w-2.5 before:h-1.5 before:mt-[6.5px] before:mr-1 peer-placeholder-shown:before:border-transparent before:rounded-tl-md before:border-t peer-focus:before:border-t-2 before:border-l peer-focus:before:border-l-2 before:pointer-events-none before:transition-all peer-disabled:before:border-transparent after:content[' '] after:block after:flex-grow after:box-border after:w-2.5 after:h-1.5 after:mt-[6.5px] after:ml-1 peer-placeholder-shown:after:border-transparent after:rounded-tr-md after:border-t peer-focus:after:border-t-2 after:border-r peer-focus:after:border-r-2 after:pointer-events-none after:transition-all peer-disabled:after:border-transparent peer-placeholder-shown:leading-[3.75] text-gray-500 peer-focus:text-[#6e59e7] before:border-blue-gray-200 peer-focus:before:!border-[#6e59e7] after:border-blue-gray-200 peer-focus:after:!border-[#6e59e7]",children:"Last Name"})]}),(0,f.jsxs)("div",{class:"relative w-full min-w-[200px] h-10",children:[(0,f.jsx)("input",{type:"email",name:"email",value:m.email,onChange:w,className:"peer w-full h-full bg-transparent text-blue-gray-700 font-sans font-normal outline outline-0 focus:outline-0 disabled:bg-blue-gray-50 disabled:border-0 transition-all placeholder-shown:border placeholder-shown:border-blue-gray-200 placeholder-shown:border-t-blue-gray-200 border focus:border-2 border-t-transparent focus:border-t-transparent text-sm px-3 py-2.5 rounded-[7px] border-blue-gray-200 focus:border-[#6e59e7]",placeholder:" "}),(0,f.jsx)("label",{class:"flex w-full h-full select-none pointer-events-none absolute left-0 font-normal !overflow-visible truncate peer-placeholder-shown:text-blue-gray-500 leading-tight peer-focus:leading-tight peer-disabled:text-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500 transition-all -top-1.5 peer-placeholder-shown:text-sm text-[11px] peer-focus:text-[11px] before:content[' '] before:block before:box-border before:w-2.5 before:h-1.5 before:mt-[6.5px] before:mr-1 peer-placeholder-shown:before:border-transparent before:rounded-tl-md before:border-t peer-focus:before:border-t-2 before:border-l peer-focus:before:border-l-2 before:pointer-events-none before:transition-all peer-disabled:before:border-transparent after:content[' '] after:block after:flex-grow after:box-border after:w-2.5 after:h-1.5 after:mt-[6.5px] after:ml-1 peer-placeholder-shown:after:border-transparent after:rounded-tr-md after:border-t peer-focus:after:border-t-2 after:border-r peer-focus:after:border-r-2 after:pointer-events-none after:transition-all peer-disabled:after:border-transparent peer-placeholder-shown:leading-[3.75] text-gray-500 peer-focus:text-[#6e59e7] before:border-blue-gray-200 peer-focus:before:!border-[#6e59e7] after:border-blue-gray-200 peer-focus:after:!border-[#6e59e7]",children:"Email"})]}),(0,f.jsxs)("div",{class:"relative w-full min-w-[200px] h-10",children:[(0,f.jsx)("input",{type:"tel",name:"phone",value:m.phone,onChange:w,className:"peer w-full h-full bg-transparent text-blue-gray-700 font-sans font-normal outline outline-0 focus:outline-0 disabled:bg-blue-gray-50 disabled:border-0 transition-all placeholder-shown:border placeholder-shown:border-blue-gray-200 placeholder-shown:border-t-blue-gray-200 border focus:border-2 border-t-transparent focus:border-t-transparent text-sm px-3 py-2.5 rounded-[7px] border-blue-gray-200 focus:border-[#6e59e7]",placeholder:" "}),(0,f.jsx)("label",{class:"flex w-full h-full select-none pointer-events-none absolute left-0 font-normal !overflow-visible truncate peer-placeholder-shown:text-blue-gray-500 leading-tight peer-focus:leading-tight peer-disabled:text-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500 transition-all -top-1.5 peer-placeholder-shown:text-sm text-[11px] peer-focus:text-[11px] before:content[' '] before:block before:box-border before:w-2.5 before:h-1.5 before:mt-[6.5px] before:mr-1 peer-placeholder-shown:before:border-transparent before:rounded-tl-md before:border-t peer-focus:before:border-t-2 before:border-l peer-focus:before:border-l-2 before:pointer-events-none before:transition-all peer-disabled:before:border-transparent after:content[' '] after:block after:flex-grow after:box-border after:w-2.5 after:h-1.5 after:mt-[6.5px] after:ml-1 peer-placeholder-shown:after:border-transparent after:rounded-tr-md after:border-t peer-focus:after:border-t-2 after:border-r peer-focus:after:border-r-2 after:pointer-events-none after:transition-all peer-disabled:after:border-transparent peer-placeholder-shown:leading-[3.75] text-gray-500 peer-focus:text-[#6e59e7] before:border-blue-gray-200 peer-focus:before:!border-[#6e59e7] after:border-blue-gray-200 peer-focus:after:!border-[#6e59e7]",children:"Phone Number"})]})]})})})}var h=t(1773),x=t(1140),m=t(5968),g=t(3574),w=t(7066),v=!0;function j(e){var r,t,o,d=(0,l.useState)([]),b=d[0],u=d[1],v=(0,l.useState)(""),j=v[0],N=v[1],y=(0,l.useState)(1),k=y[0],O=y[1],C=(0,l.useState)(null),P=C[0],Z=C[1],_=(0,l.useState)(!1),S=_[0],E=_[1],F=(0,l.useState)(!1),U=F[0],M=F[1];(0,l.useEffect)(function(){var r;M(!0),(r=(0,a.Z)(n().mark(function r(){var t;return n().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,w.Z.get("/api/user?query=".concat(j,"&skip=").concat((k-1)*10),{headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(e.user.token)}});case 3:u({data:(t=r.sent).data.results.map(function(e){return{id:e._id,firstName:e.firstName,lastName:e.lastName,email:e.email||"-",phone:e.phone||"-"}}),total:t.data.total}),M(!1),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(0),u([]),M(!1);case 13:case"end":return r.stop()}},r,null,[[0,9]])})),function(){return r.apply(this,arguments)})()},[j,k]);var q=function(e){Z(e),E(!0)},z=(r=(0,a.Z)(n().mark(function e(r){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/user/update/".concat(r.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 3:u(b.map(function(e){return e.id===r.id?r:e})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Update failed",e.t0);case 9:case"end":return e.stop()}},e,null,[[0,6]])})),function(e){return r.apply(this,arguments)}),D=(t=(0,a.Z)(n().mark(function e(r){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/user/delete/".concat(r),{method:"DELETE"});case 3:u(b.filter(function(e){return e.id!==r})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Delete failed",e.t0);case 9:case"end":return e.stop()}},e,null,[[0,6]])})),function(e){return t.apply(this,arguments)});return(0,f.jsx)(s.Z,{user:null==e?void 0:e.user,children:(0,f.jsx)("section",{className:"bg-white",children:(0,f.jsxs)("div",{className:"py-8 lg:py-16 px-4 mx-auto max-w-screen-xl",children:[(0,f.jsx)("h2",{className:"mb-8 text-4xl tracking-tight font-extrabold text-center bg-gradient-to-r from-blue-400 to-purple-600 bg-clip-text text-transparent",children:"User Management"}),(0,f.jsx)("div",{className:"mb-4",children:(0,f.jsxs)("div",{className:"relative w-2/5",children:[(0,f.jsx)("input",{type:"text",placeholder:"Search...",value:j,onChange:function(e){N(e.target.value),O(1)},className:"w-full px-3 py-2 pl-10 border rounded focus:outline-none focus:border-[#6e59e7] focus:ring-[#806aff] block focus:ring-1"}),(0,f.jsx)(h.U41,{className:"absolute left-3 top-3 text-gray-500"})]})}),U?(0,f.jsx)("div",{className:"w-full flex justify-center h-[208px]",children:(0,f.jsx)(x.Z,{size:"large",className:"my-auto"})}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"overflow-x-auto relative shadow-md sm:rounded-lg",children:(0,f.jsxs)("table",{className:"w-full text-sm text-gray-500",children:[(0,f.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:(0,f.jsxs)("tr",{className:"bg-[#e6e1ff]",children:[(0,f.jsx)("th",{className:"border p-2",children:"First Name"}),(0,f.jsx)("th",{className:"border p-2",children:"Last Name"}),(0,f.jsx)("th",{className:"border p-2",children:"Email"}),(0,f.jsx)("th",{className:"border p-2",children:"Phone number"}),(0,f.jsx)("th",{className:"border p-2",children:"Action"})]})}),(0,f.jsx)("tbody",{children:null==b||null===(o=b.data)||void 0===o?void 0:o.map(function(e){return(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"border p-2",children:e.firstName}),(0,f.jsx)("td",{className:"border p-2",children:e.lastName}),(0,f.jsx)("td",{className:"border p-2",children:e.email}),(0,f.jsx)("td",{className:"border p-2",children:e.phone}),(0,f.jsx)("td",{className:"border p-2",children:(0,f.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,f.jsx)(c.ZP,{onClick:function(){return q(e)},className:"bg-[#e6e1ff] px-3 py-2 rounded-sm hover:bg-[#cfc7ff]",children:(0,f.jsx)(g.zmo,{className:"fill-[#6e59e7]"})}),(0,f.jsx)(c.ZP,{onClick:function(){i.Z.confirm({title:"Are you sure you want to delete this user?",onOk:function(){return D(e.id)}})},className:"bg-[#ffdada] px-3 py-2 rounded-sm hover:bg-white",children:(0,f.jsx)(g.FH3,{className:"fill-[#fc4a4a]"})})]})})]},e.id)})})]})}),(0,f.jsx)("div",{className:"mt-[8px]",children:(0,f.jsx)(m.Z,{align:"end",current:k,total:b.total,defaultPageSize:10,onChange:function(e){return O(e)}})})]}),S&&P&&(0,f.jsx)(p,{user:P,onClose:function(){return E(!1)},onUpdate:z})]})})})}},3871:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/usermanagement",function(){return t(6096)}])}},function(e){e.O(0,[838,365,483,664,873,45,888,774,179],function(){return e(e.s=3871)}),_N_E=e.O()}]);
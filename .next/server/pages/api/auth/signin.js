"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/auth/signin";
exports.ids = ["pages/api/auth/signin"];
exports.modules = {

/***/ "cookie":
/*!*************************!*\
  !*** external "cookie" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("cookie");

/***/ }),

/***/ "dotenv":
/*!*************************!*\
  !*** external "dotenv" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("dotenv");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "passport":
/*!***************************!*\
  !*** external "passport" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("passport");

/***/ }),

/***/ "passport-local":
/*!*********************************!*\
  !*** external "passport-local" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("passport-local");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fsignin&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cauth%5Csignin.js&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fsignin&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cauth%5Csignin.js&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_auth_signin_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src\\pages\\api\\auth\\signin.js */ \"(api)/./src/pages/api/auth/signin.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_auth_signin_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_auth_signin_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/auth/signin\",\n        pathname: \"/api/auth/signin\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_auth_signin_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmF1dGglMkZzaWduaW4mcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZzcmMlNUNwYWdlcyU1Q2FwaSU1Q2F1dGglNUNzaWduaW4uanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDK0Q7QUFDL0Q7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDBEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQywwREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtYXV0aC8/ZGYyYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vc3JjXFxcXHBhZ2VzXFxcXGFwaVxcXFxhdXRoXFxcXHNpZ25pbi5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2F1dGgvc2lnbmluXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYXV0aC9zaWduaW5cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fsignin&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cauth%5Csignin.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/pages/api/auth/signin.js":
/*!**************************************!*\
  !*** ./src/pages/api/auth/signin.js ***!
  \**************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _server_controller_auth_controller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../server/controller/auth.controller */ \"(api)/./src/server/controller/auth.controller.js\");\n/* harmony import */ var _server_auth_auth_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../server/auth/auth.service */ \"(api)/./src/server/auth/auth.service.js\");\n/* harmony import */ var _server_common_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../server/common/db */ \"(api)/./src/server/common/db.js\");\n\n\n\nasync function handler(req, res) {\n  (0,_server_common_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n  if (req.method === 'POST') {\n    try {\n      let result = await _server_controller_auth_controller__WEBPACK_IMPORTED_MODULE_0__[\"default\"].signin(req.body);\n      (0,_server_auth_auth_service__WEBPACK_IMPORTED_MODULE_1__.setAuthCookie)(res, result);\n    } catch (error) {\n      res.status(400).json({\n        message: error.message\n      });\n    }\n  } else {\n    res.status(405).json({\n      message: \"Method not allowed\"\n    });\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2F1dGgvc2lnbmluLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBd0U7QUFDTjtBQUNoQjtBQUVuQyxlQUFlRyxPQUFPQSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRTtFQUM1Q0gsNkRBQVMsQ0FBQyxDQUFDO0VBQ1gsSUFBSUUsR0FBRyxDQUFDRSxNQUFNLEtBQUssTUFBTSxFQUFFO0lBQ3ZCLElBQUk7TUFDQSxJQUFJQyxNQUFNLEdBQUcsTUFBTVAsaUZBQXFCLENBQUNJLEdBQUcsQ0FBQ0ssSUFBSSxDQUFDO01BQ2xEUix3RUFBYSxDQUFDSSxHQUFHLEVBQUVFLE1BQU0sQ0FBQztJQUM5QixDQUFDLENBQUMsT0FBT0csS0FBSyxFQUFFO01BQ1pMLEdBQUcsQ0FBQ00sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBRUMsT0FBTyxFQUFFSCxLQUFLLENBQUNHO01BQVEsQ0FBQyxDQUFDO0lBQ3BEO0VBQ0osQ0FBQyxNQUFNO0lBQ0hSLEdBQUcsQ0FBQ00sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUMsT0FBTyxFQUFFO0lBQXFCLENBQUMsQ0FBQztFQUMzRDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLWF1dGgvLi9zcmMvcGFnZXMvYXBpL2F1dGgvc2lnbmluLmpzPzA0YzciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF1dGhDb250cm9sbGVyIGZyb20gXCIuLi8uLi8uLi9zZXJ2ZXIvY29udHJvbGxlci9hdXRoLmNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IHNldEF1dGhDb29raWUgfSBmcm9tIFwiLi4vLi4vLi4vc2VydmVyL2F1dGgvYXV0aC5zZXJ2aWNlXCI7XG5pbXBvcnQgZGJDb25uZWN0IGZyb20gXCIuLi8uLi8uLi9zZXJ2ZXIvY29tbW9uL2RiXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgICBkYkNvbm5lY3QoKVxuICAgIGlmIChyZXEubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCBhdXRoQ29udHJvbGxlci5zaWduaW4ocmVxLmJvZHkpO1xuICAgICAgICAgICAgc2V0QXV0aENvb2tpZShyZXMsIHJlc3VsdCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICByZXMuc3RhdHVzKDQwNSkuanNvbih7IG1lc3NhZ2U6IFwiTWV0aG9kIG5vdCBhbGxvd2VkXCIgfSk7XG4gICAgfVxufSJdLCJuYW1lcyI6WyJhdXRoQ29udHJvbGxlciIsInNldEF1dGhDb29raWUiLCJkYkNvbm5lY3QiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwicmVzdWx0Iiwic2lnbmluIiwiYm9keSIsImVycm9yIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/auth/signin.js\n");

/***/ }),

/***/ "(api)/./src/server/auth/auth.service.js":
/*!*****************************************!*\
  !*** ./src/server/auth/auth.service.js ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   comparePasswords: () => (/* binding */ comparePasswords),\n/* harmony export */   generateToken: () => (/* binding */ generateToken),\n/* harmony export */   hashedPassword: () => (/* binding */ hashedPassword),\n/* harmony export */   setAuthCookie: () => (/* binding */ setAuthCookie),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var _model_user_model_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../model/user.model.js */ \"(api)/./src/server/model/user.model.js\");\n/* harmony import */ var _common_settings_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/settings.js */ \"(api)/./src/server/common/settings.js\");\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! cookie */ \"cookie\");\n\n\n\n\n\n// Function to generate a random salt\nconst generateSalt = () => {\n  return crypto__WEBPACK_IMPORTED_MODULE_0__.randomBytes(16).toString(\"hex\");\n};\n\n// Function to hash the password with the salt\nconst hashPassword = (password, salt) => {\n  const hash = crypto__WEBPACK_IMPORTED_MODULE_0__.pbkdf2Sync(password, salt, 10000, 64, \"sha512\");\n  return hash.toString(\"hex\");\n};\n\n// Function to compare a password with the hashed password\nconst comparePasswords = async (password, hashedPassword, salt) => {\n  const hash = await crypto__WEBPACK_IMPORTED_MODULE_0__.pbkdf2Sync(password, salt, 10000, 64, \"sha512\").toString(\"hex\");\n  const match = hash === hashedPassword;\n  return match;\n};\nconst hashedPassword = password => {\n  const salt = generateSalt();\n  const newPwd = hashPassword(password, salt);\n  return {\n    newPwd,\n    salt\n  };\n};\nconst setAuthCookie = (res, user) => {\n  if (user) {\n    res.setHeader(\"Set-Cookie\", [(0,cookie__WEBPACK_IMPORTED_MODULE_3__.serialize)(\"token\", user.token, {\n      httpOnly: true,\n      path: \"/\"\n    }), (0,cookie__WEBPACK_IMPORTED_MODULE_3__.serialize)(\"user\", JSON.stringify({\n      id: user._id,\n      email: user.email,\n      firstName: user.firstName,\n      lastName: user.lastName,\n      role: user?.role\n    }), {\n      httpOnly: true,\n      path: \"/\"\n    })]);\n  }\n  return res.status(200).json(user);\n};\nconst generateToken = user => {\n  const header = Buffer.from(JSON.stringify({\n    alg: \"HS256\",\n    typ: \"JWT\"\n  })).toString(\"base64\");\n  const payloadData = {\n    _id: user?._id,\n    exp: Date.now() + 12 * 60 * 60 * 1000\n  };\n  const payload = Buffer.from(JSON.stringify(payloadData)).toString(\"base64\");\n  const signature = crypto__WEBPACK_IMPORTED_MODULE_0__.createHmac(\"sha256\", _common_settings_js__WEBPACK_IMPORTED_MODULE_2__.SECRET_TOKEN).update(`${header}.${payload}`).digest(\"base64\");\n  return `${header}.${payload}.${signature}`;\n};\nconst verifyToken = async token => {\n  let newToken = token?.replace(\"Bearer \", \"\");\n  if (!newToken || newToken?.toString()?.length === 0) throw new Error(\"Invalid token\");\n  const [header, payload, signature] = newToken?.split(\".\");\n  const expectedSignature = crypto__WEBPACK_IMPORTED_MODULE_0__.createHmac(\"sha256\", _common_settings_js__WEBPACK_IMPORTED_MODULE_2__.SECRET_TOKEN).update(`${header}.${payload}`).digest(\"base64\");\n  if (signature !== expectedSignature) {\n    throw new Error(\"Invalid token signature\");\n  }\n  const decodedPayload = JSON.parse(Buffer.from(payload, \"base64\").toString());\n  if (Date.now() > decodedPayload?.exp) {\n    throw new Error(\"Token has expired\");\n  }\n  let user = await _model_user_model_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findById(decodedPayload?._id);\n  if (!user) {\n    throw new Error(\"User not found\");\n  }\n  return user;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQyxDQUFDO0VBQzVFLElBQUltQyxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEdBQUdhLGNBQWMsRUFBRWYsR0FBRyxFQUFFO0lBQ3BDLE1BQU0sSUFBSVksS0FBSyxDQUFDLG1CQUFtQixDQUFDO0VBQ3RDO0VBRUEsSUFBSWxDLElBQUksR0FBRyxNQUFNakIscUVBQWEsQ0FBQ3NELGNBQWMsRUFBRTdCLEdBQUcsQ0FBQztFQUNuRCxJQUFJLENBQUNSLElBQUksRUFBRTtJQUNULE1BQU0sSUFBSWtDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQztFQUNuQztFQUNBLE9BQU9sQyxJQUFJO0FBQ2IsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy1hdXRoLy4vc3JjL3NlcnZlci9hdXRoL2F1dGguc2VydmljZS5qcz8yMTgwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjcnlwdG8gZnJvbSBcImNyeXB0b1wiO1xuaW1wb3J0IFVzZXIgZnJvbSBcIi4uL21vZGVsL3VzZXIubW9kZWwuanNcIjtcbmltcG9ydCB7IFNFQ1JFVF9UT0tFTiB9IGZyb20gXCIuLi9jb21tb24vc2V0dGluZ3MuanNcIjtcbmltcG9ydCB7IHNlcmlhbGl6ZSB9IGZyb20gXCJjb29raWVcIjtcblxuLy8gRnVuY3Rpb24gdG8gZ2VuZXJhdGUgYSByYW5kb20gc2FsdFxuY29uc3QgZ2VuZXJhdGVTYWx0ID0gKCkgPT4ge1xuICByZXR1cm4gY3J5cHRvLnJhbmRvbUJ5dGVzKDE2KS50b1N0cmluZyhcImhleFwiKTtcbn07XG5cbi8vIEZ1bmN0aW9uIHRvIGhhc2ggdGhlIHBhc3N3b3JkIHdpdGggdGhlIHNhbHRcbmNvbnN0IGhhc2hQYXNzd29yZCA9IChwYXNzd29yZCwgc2FsdCkgPT4ge1xuICBjb25zdCBoYXNoID0gY3J5cHRvLnBia2RmMlN5bmMocGFzc3dvcmQsIHNhbHQsIDEwMDAwLCA2NCwgXCJzaGE1MTJcIik7XG4gIHJldHVybiBoYXNoLnRvU3RyaW5nKFwiaGV4XCIpO1xufTtcblxuLy8gRnVuY3Rpb24gdG8gY29tcGFyZSBhIHBhc3N3b3JkIHdpdGggdGhlIGhhc2hlZCBwYXNzd29yZFxuY29uc3QgY29tcGFyZVBhc3N3b3JkcyA9IGFzeW5jIChwYXNzd29yZCwgaGFzaGVkUGFzc3dvcmQsIHNhbHQpID0+IHtcbiAgY29uc3QgaGFzaCA9IGF3YWl0IGNyeXB0b1xuICAgIC5wYmtkZjJTeW5jKHBhc3N3b3JkLCBzYWx0LCAxMDAwMCwgNjQsIFwic2hhNTEyXCIpXG4gICAgLnRvU3RyaW5nKFwiaGV4XCIpO1xuICBjb25zdCBtYXRjaCA9IGhhc2ggPT09IGhhc2hlZFBhc3N3b3JkO1xuXG4gIHJldHVybiBtYXRjaDtcbn07XG5cbmNvbnN0IGhhc2hlZFBhc3N3b3JkID0gKHBhc3N3b3JkKSA9PiB7XG4gIGNvbnN0IHNhbHQgPSBnZW5lcmF0ZVNhbHQoKTtcbiAgY29uc3QgbmV3UHdkID0gaGFzaFBhc3N3b3JkKHBhc3N3b3JkLCBzYWx0KTtcbiAgcmV0dXJuIHsgbmV3UHdkLCBzYWx0IH07XG59O1xuXG5jb25zdCBzZXRBdXRoQ29va2llID0gKHJlcywgdXNlcikgPT4ge1xuICBpZiAodXNlcikge1xuICAgIHJlcy5zZXRIZWFkZXIoXCJTZXQtQ29va2llXCIsIFtcbiAgICAgIHNlcmlhbGl6ZShcInRva2VuXCIsIHVzZXIudG9rZW4sIHsgaHR0cE9ubHk6IHRydWUsIHBhdGg6IFwiL1wiIH0pLFxuICAgICAgc2VyaWFsaXplKFxuICAgICAgICBcInVzZXJcIixcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGlkOiB1c2VyLl9pZCxcbiAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICBmaXJzdE5hbWU6IHVzZXIuZmlyc3ROYW1lLFxuICAgICAgICAgIGxhc3ROYW1lOiB1c2VyLmxhc3ROYW1lLFxuICAgICAgICAgIHJvbGU6IHVzZXI/LnJvbGUsXG4gICAgICAgIH0pLFxuICAgICAgICB7IGh0dHBPbmx5OiB0cnVlLCBwYXRoOiBcIi9cIiB9XG4gICAgICApLFxuICAgIF0pO1xuICB9XG4gIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih1c2VyKTtcbn07XG5cbmNvbnN0IGdlbmVyYXRlVG9rZW4gPSAodXNlcikgPT4ge1xuICBjb25zdCBoZWFkZXIgPSBCdWZmZXIuZnJvbShcbiAgICBKU09OLnN0cmluZ2lmeSh7IGFsZzogXCJIUzI1NlwiLCB0eXA6IFwiSldUXCIgfSlcbiAgKS50b1N0cmluZyhcImJhc2U2NFwiKTtcbiAgY29uc3QgcGF5bG9hZERhdGEgPSB7IF9pZDogdXNlcj8uX2lkLCBleHA6IERhdGUubm93KCkgKyAxMiAqIDYwICogNjAgKiAxMDAwIH07XG4gIGNvbnN0IHBheWxvYWQgPSBCdWZmZXIuZnJvbShKU09OLnN0cmluZ2lmeShwYXlsb2FkRGF0YSkpLnRvU3RyaW5nKFwiYmFzZTY0XCIpO1xuXG4gIGNvbnN0IHNpZ25hdHVyZSA9IGNyeXB0b1xuICAgIC5jcmVhdGVIbWFjKFwic2hhMjU2XCIsIFNFQ1JFVF9UT0tFTilcbiAgICAudXBkYXRlKGAke2hlYWRlcn0uJHtwYXlsb2FkfWApXG4gICAgLmRpZ2VzdChcImJhc2U2NFwiKTtcbiAgcmV0dXJuIGAke2hlYWRlcn0uJHtwYXlsb2FkfS4ke3NpZ25hdHVyZX1gO1xufTtcblxuY29uc3QgdmVyaWZ5VG9rZW4gPSBhc3luYyAodG9rZW4pID0+IHtcbiAgbGV0IG5ld1Rva2VuID0gdG9rZW4/LnJlcGxhY2UoXCJCZWFyZXIgXCIsIFwiXCIpO1xuICBpZiAoIW5ld1Rva2VuIHx8IG5ld1Rva2VuPy50b1N0cmluZygpPy5sZW5ndGggPT09IDApXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB0b2tlblwiKTtcbiAgY29uc3QgW2hlYWRlciwgcGF5bG9hZCwgc2lnbmF0dXJlXSA9IG5ld1Rva2VuPy5zcGxpdChcIi5cIik7XG4gIGNvbnN0IGV4cGVjdGVkU2lnbmF0dXJlID0gY3J5cHRvXG4gICAgLmNyZWF0ZUhtYWMoXCJzaGEyNTZcIiwgU0VDUkVUX1RPS0VOKVxuICAgIC51cGRhdGUoYCR7aGVhZGVyfS4ke3BheWxvYWR9YClcbiAgICAuZGlnZXN0KFwiYmFzZTY0XCIpO1xuICBpZiAoc2lnbmF0dXJlICE9PSBleHBlY3RlZFNpZ25hdHVyZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgdG9rZW4gc2lnbmF0dXJlXCIpO1xuICB9XG4gIGNvbnN0IGRlY29kZWRQYXlsb2FkID0gSlNPTi5wYXJzZShCdWZmZXIuZnJvbShwYXlsb2FkLCBcImJhc2U2NFwiKS50b1N0cmluZygpKTtcbiAgaWYgKERhdGUubm93KCkgPiBkZWNvZGVkUGF5bG9hZD8uZXhwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVG9rZW4gaGFzIGV4cGlyZWRcIik7XG4gIH1cblxuICBsZXQgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQoZGVjb2RlZFBheWxvYWQ/Ll9pZCk7XG4gIGlmICghdXNlcikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlVzZXIgbm90IGZvdW5kXCIpO1xuICB9XG4gIHJldHVybiB1c2VyO1xufTtcblxuZXhwb3J0IHtcbiAgaGFzaGVkUGFzc3dvcmQsXG4gIGNvbXBhcmVQYXNzd29yZHMsXG4gIHNldEF1dGhDb29raWUsXG4gIGdlbmVyYXRlVG9rZW4sXG4gIHZlcmlmeVRva2VuLFxufTtcbiJdLCJuYW1lcyI6WyJjcnlwdG8iLCJVc2VyIiwiU0VDUkVUX1RPS0VOIiwic2VyaWFsaXplIiwiZ2VuZXJhdGVTYWx0IiwicmFuZG9tQnl0ZXMiLCJ0b1N0cmluZyIsImhhc2hQYXNzd29yZCIsInBhc3N3b3JkIiwic2FsdCIsImhhc2giLCJwYmtkZjJTeW5jIiwiY29tcGFyZVBhc3N3b3JkcyIsImhhc2hlZFBhc3N3b3JkIiwibWF0Y2giLCJuZXdQd2QiLCJzZXRBdXRoQ29va2llIiwicmVzIiwidXNlciIsInNldEhlYWRlciIsInRva2VuIiwiaHR0cE9ubHkiLCJwYXRoIiwiSlNPTiIsInN0cmluZ2lmeSIsImlkIiwiX2lkIiwiZW1haWwiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInJvbGUiLCJzdGF0dXMiLCJqc29uIiwiZ2VuZXJhdGVUb2tlbiIsImhlYWRlciIsIkJ1ZmZlciIsImZyb20iLCJhbGciLCJ0eXAiLCJwYXlsb2FkRGF0YSIsImV4cCIsIkRhdGUiLCJub3ciLCJwYXlsb2FkIiwic2lnbmF0dXJlIiwiY3JlYXRlSG1hYyIsInVwZGF0ZSIsImRpZ2VzdCIsInZlcmlmeVRva2VuIiwibmV3VG9rZW4iLCJyZXBsYWNlIiwibGVuZ3RoIiwiRXJyb3IiLCJzcGxpdCIsImV4cGVjdGVkU2lnbmF0dXJlIiwiZGVjb2RlZFBheWxvYWQiLCJwYXJzZSIsImZpbmRCeUlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/server/auth/auth.service.js\n");

/***/ }),

/***/ "(api)/./src/server/auth/passport/local.js":
/*!*******************************************!*\
  !*** ./src/server/auth/passport/local.js ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var passport__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! passport */ \"passport\");\n/* harmony import */ var passport_local__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! passport-local */ \"passport-local\");\n/* harmony import */ var _auth_service_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../auth.service.js */ \"(api)/./src/server/auth/auth.service.js\");\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n\n\n\nconst Authenticate = async (user, email, password, done) => {\n  console.log(\"email=========>\", email);\n  user.findOne({\n    email: email\n  }).then(async users => {\n    console.log(\"users=========>\", users);\n    if (!users) {\n      return done(undefined, false, {\n        message: \"อีเมลไม่ถูกต้อง\"\n      });\n    }\n    if (!users?.password || users?.password?.toString().length === 0) return done(undefined, false, {\n      message: \"กรุณาตั้งรหัสผ่านก่อนเข้าสู่ระบบ\"\n    });\n    if (!users?.verify?.status) return done(undefined, false, {\n      message: \"ยังไม่อนุมัติการใช้งานในระบบ กรุณาติดต่อเจ้าหน้าที่\"\n    });\n    if (!users?.salt || users?.salt?.toString().length === 0 || users?.salt?.toString().length < 32) return done(undefined, false, {\n      message: \"กรุณาตั้งรหัสผ่านก่อนเข้าสู่ระบบ\"\n    });\n    const checkPwd = await (0,_auth_service_js__WEBPACK_IMPORTED_MODULE_2__.comparePasswords)(password, users?.password, users?.salt);\n    if (checkPwd) {\n      let token = await (0,_auth_service_js__WEBPACK_IMPORTED_MODULE_2__.generateToken)(users);\n      const newUser = await user.findOneAndUpdate({\n        email: email\n      }, {\n        token: token\n      });\n      return done(undefined, _objectSpread(_objectSpread({}, newUser?._doc), {}, {\n        token: token\n      }), null);\n    } else {\n      return done(undefined, false, {\n        message: \"รหัสผ่านไม่ถูกต้อง\"\n      });\n    }\n  }).catch(err => {\n    return done(err, false, {\n      message: \"Something went wrong, please try again.\"\n    });\n  });\n};\nconst setUp = async user => {\n  passport__WEBPACK_IMPORTED_MODULE_0__.use(\"local\", new passport_local__WEBPACK_IMPORTED_MODULE_1__.Strategy({\n    usernameField: \"email\",\n    passwordField: \"password\"\n  }, function (email, password, done) {\n    return Authenticate(user, email, password, done);\n  }));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (setUp);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2F1dGgvcGFzc3BvcnQvbG9jYWwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQWdDO0FBQ1U7QUFDMkI7QUFFckUsTUFBTUksWUFBWSxHQUFHLE1BQUFBLENBQU9DLElBQUksRUFBRUMsS0FBSyxFQUFFQyxRQUFRLEVBQUVDLElBQUksS0FBSztFQUMxREMsT0FBTyxDQUFDQyxHQUFHLENBQUMsaUJBQWlCLEVBQUVKLEtBQUssQ0FBQztFQUNyQ0QsSUFBSSxDQUNETSxPQUFPLENBQUM7SUFBRUwsS0FBSyxFQUFFQTtFQUFNLENBQUMsQ0FBQyxDQUN6Qk0sSUFBSSxDQUFDLE1BQU9DLEtBQUssSUFBSztJQUNyQkosT0FBTyxDQUFDQyxHQUFHLENBQUMsaUJBQWlCLEVBQUVHLEtBQUssQ0FBQztJQUNyQyxJQUFJLENBQUNBLEtBQUssRUFBRTtNQUNWLE9BQU9MLElBQUksQ0FBQ00sU0FBUyxFQUFFLEtBQUssRUFBRTtRQUM1QkMsT0FBTyxFQUFFO01BQ1gsQ0FBQyxDQUFDO0lBQ0o7SUFDQSxJQUFJLENBQUNGLEtBQUssRUFBRU4sUUFBUSxJQUFJTSxLQUFLLEVBQUVOLFFBQVEsRUFBRVMsUUFBUSxDQUFDLENBQUMsQ0FBQ0MsTUFBTSxLQUFLLENBQUMsRUFDOUQsT0FBT1QsSUFBSSxDQUFDTSxTQUFTLEVBQUUsS0FBSyxFQUFFO01BQzVCQyxPQUFPLEVBQUU7SUFDWCxDQUFDLENBQUM7SUFDSixJQUFJLENBQUNGLEtBQUssRUFBRUssTUFBTSxFQUFFQyxNQUFNLEVBQ3hCLE9BQU9YLElBQUksQ0FBQ00sU0FBUyxFQUFFLEtBQUssRUFBRTtNQUM1QkMsT0FBTyxFQUFFO0lBQ1gsQ0FBQyxDQUFDO0lBQ0osSUFDRSxDQUFDRixLQUFLLEVBQUVPLElBQUksSUFDWlAsS0FBSyxFQUFFTyxJQUFJLEVBQUVKLFFBQVEsQ0FBQyxDQUFDLENBQUNDLE1BQU0sS0FBSyxDQUFDLElBQ3BDSixLQUFLLEVBQUVPLElBQUksRUFBRUosUUFBUSxDQUFDLENBQUMsQ0FBQ0MsTUFBTSxHQUFHLEVBQUUsRUFFbkMsT0FBT1QsSUFBSSxDQUFDTSxTQUFTLEVBQUUsS0FBSyxFQUFFO01BQzVCQyxPQUFPLEVBQUU7SUFDWCxDQUFDLENBQUM7SUFDSixNQUFNTSxRQUFRLEdBQUcsTUFBTW5CLGtFQUFnQixDQUNyQ0ssUUFBUSxFQUNSTSxLQUFLLEVBQUVOLFFBQVEsRUFDZk0sS0FBSyxFQUFFTyxJQUNULENBQUM7SUFDRCxJQUFJQyxRQUFRLEVBQUU7TUFDWixJQUFJQyxLQUFLLEdBQUcsTUFBTW5CLCtEQUFhLENBQUNVLEtBQUssQ0FBQztNQUN0QyxNQUFNVSxPQUFPLEdBQUcsTUFBTWxCLElBQUksQ0FBQ21CLGdCQUFnQixDQUN6QztRQUFFbEIsS0FBSyxFQUFFQTtNQUFNLENBQUMsRUFDaEI7UUFBRWdCLEtBQUssRUFBRUE7TUFBTSxDQUNqQixDQUFDO01BQ0QsT0FBT2QsSUFBSSxDQUFDTSxTQUFTLEVBQUFXLGFBQUEsQ0FBQUEsYUFBQSxLQUFPRixPQUFPLEVBQUVHLElBQUk7UUFBRUosS0FBSyxFQUFFQTtNQUFLLElBQUksSUFBSSxDQUFDO0lBQ2xFLENBQUMsTUFBTTtNQUNMLE9BQU9kLElBQUksQ0FBQ00sU0FBUyxFQUFFLEtBQUssRUFBRTtRQUM1QkMsT0FBTyxFQUFFO01BQ1gsQ0FBQyxDQUFDO0lBQ0o7RUFDRixDQUFDLENBQUMsQ0FDRFksS0FBSyxDQUFFQyxHQUFHLElBQUs7SUFDZCxPQUFPcEIsSUFBSSxDQUFDb0IsR0FBRyxFQUFFLEtBQUssRUFBRTtNQUN0QmIsT0FBTyxFQUFFO0lBQ1gsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0FBQ04sQ0FBQztBQUVELE1BQU1jLEtBQUssR0FBRyxNQUFPeEIsSUFBSSxJQUFLO0VBQzVCTCx5Q0FBWSxDQUNWLE9BQU8sRUFDUCxJQUFJQyxvREFBUSxDQUNWO0lBQ0U4QixhQUFhLEVBQUUsT0FBTztJQUN0QkMsYUFBYSxFQUFFO0VBQ2pCLENBQUMsRUFDRCxVQUFVMUIsS0FBSyxFQUFFQyxRQUFRLEVBQUVDLElBQUksRUFBRTtJQUMvQixPQUFPSixZQUFZLENBQUNDLElBQUksRUFBRUMsS0FBSyxFQUFFQyxRQUFRLEVBQUVDLElBQUksQ0FBQztFQUNsRCxDQUNGLENBQ0YsQ0FBQztBQUNILENBQUM7QUFFRCxpRUFBZXFCLEtBQUsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtYXV0aC8uL3NyYy9zZXJ2ZXIvYXV0aC9wYXNzcG9ydC9sb2NhbC5qcz8zMGM0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwYXNzcG9ydCBmcm9tIFwicGFzc3BvcnRcIjtcbmltcG9ydCB7IFN0cmF0ZWd5IH0gZnJvbSBcInBhc3Nwb3J0LWxvY2FsXCI7XG5pbXBvcnQgeyBjb21wYXJlUGFzc3dvcmRzLCBnZW5lcmF0ZVRva2VuIH0gZnJvbSBcIi4uL2F1dGguc2VydmljZS5qc1wiO1xuXG5jb25zdCBBdXRoZW50aWNhdGUgPSBhc3luYyAodXNlciwgZW1haWwsIHBhc3N3b3JkLCBkb25lKSA9PiB7XG4gIGNvbnNvbGUubG9nKFwiZW1haWw9PT09PT09PT0+XCIsIGVtYWlsKTtcbiAgdXNlclxuICAgIC5maW5kT25lKHsgZW1haWw6IGVtYWlsIH0pXG4gICAgLnRoZW4oYXN5bmMgKHVzZXJzKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhcInVzZXJzPT09PT09PT09PlwiLCB1c2Vycyk7XG4gICAgICBpZiAoIXVzZXJzKSB7XG4gICAgICAgIHJldHVybiBkb25lKHVuZGVmaW5lZCwgZmFsc2UsIHtcbiAgICAgICAgICBtZXNzYWdlOiBcIuC4reC4teC5gOC4oeC4peC5hOC4oeC5iOC4luC4ueC4geC4leC5ieC4reC4h1wiLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICghdXNlcnM/LnBhc3N3b3JkIHx8IHVzZXJzPy5wYXNzd29yZD8udG9TdHJpbmcoKS5sZW5ndGggPT09IDApXG4gICAgICAgIHJldHVybiBkb25lKHVuZGVmaW5lZCwgZmFsc2UsIHtcbiAgICAgICAgICBtZXNzYWdlOiBcIuC4geC4o+C4uOC4k+C4suC4leC4seC5ieC4h+C4o+C4q+C4seC4quC4nOC5iOC4suC4meC4geC5iOC4reC4meC5gOC4guC5ieC4suC4quC4ueC5iOC4o+C4sOC4muC4mlwiLFxuICAgICAgICB9KTtcbiAgICAgIGlmICghdXNlcnM/LnZlcmlmeT8uc3RhdHVzKVxuICAgICAgICByZXR1cm4gZG9uZSh1bmRlZmluZWQsIGZhbHNlLCB7XG4gICAgICAgICAgbWVzc2FnZTogXCLguKLguLHguIfguYTguKHguYjguK3guJnguLjguKHguLHguJXguLTguIHguLLguKPguYPguIrguYnguIfguLLguJnguYPguJnguKPguLDguJrguJog4LiB4Lij4Li44LiT4Liy4LiV4Li04LiU4LiV4LmI4Lit4LmA4LiI4LmJ4Liy4Lir4LiZ4LmJ4Liy4LiX4Li14LmIXCIsXG4gICAgICAgIH0pO1xuICAgICAgaWYgKFxuICAgICAgICAhdXNlcnM/LnNhbHQgfHxcbiAgICAgICAgdXNlcnM/LnNhbHQ/LnRvU3RyaW5nKCkubGVuZ3RoID09PSAwIHx8XG4gICAgICAgIHVzZXJzPy5zYWx0Py50b1N0cmluZygpLmxlbmd0aCA8IDMyXG4gICAgICApXG4gICAgICAgIHJldHVybiBkb25lKHVuZGVmaW5lZCwgZmFsc2UsIHtcbiAgICAgICAgICBtZXNzYWdlOiBcIuC4geC4o+C4uOC4k+C4suC4leC4seC5ieC4h+C4o+C4q+C4seC4quC4nOC5iOC4suC4meC4geC5iOC4reC4meC5gOC4guC5ieC4suC4quC4ueC5iOC4o+C4sOC4muC4mlwiLFxuICAgICAgICB9KTtcbiAgICAgIGNvbnN0IGNoZWNrUHdkID0gYXdhaXQgY29tcGFyZVBhc3N3b3JkcyhcbiAgICAgICAgcGFzc3dvcmQsXG4gICAgICAgIHVzZXJzPy5wYXNzd29yZCxcbiAgICAgICAgdXNlcnM/LnNhbHRcbiAgICAgICk7XG4gICAgICBpZiAoY2hlY2tQd2QpIHtcbiAgICAgICAgbGV0IHRva2VuID0gYXdhaXQgZ2VuZXJhdGVUb2tlbih1c2Vycyk7XG4gICAgICAgIGNvbnN0IG5ld1VzZXIgPSBhd2FpdCB1c2VyLmZpbmRPbmVBbmRVcGRhdGUoXG4gICAgICAgICAgeyBlbWFpbDogZW1haWwgfSxcbiAgICAgICAgICB7IHRva2VuOiB0b2tlbiB9XG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBkb25lKHVuZGVmaW5lZCwgeyAuLi5uZXdVc2VyPy5fZG9jLCB0b2tlbjogdG9rZW4gfSwgbnVsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZG9uZSh1bmRlZmluZWQsIGZhbHNlLCB7XG4gICAgICAgICAgbWVzc2FnZTogXCLguKPguKvguLHguKrguJzguYjguLLguJnguYTguKHguYjguJbguLnguIHguJXguYnguK3guIdcIixcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgcmV0dXJuIGRvbmUoZXJyLCBmYWxzZSwge1xuICAgICAgICBtZXNzYWdlOiBcIlNvbWV0aGluZyB3ZW50IHdyb25nLCBwbGVhc2UgdHJ5IGFnYWluLlwiLFxuICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG5jb25zdCBzZXRVcCA9IGFzeW5jICh1c2VyKSA9PiB7XG4gIHBhc3Nwb3J0LnVzZShcbiAgICBcImxvY2FsXCIsXG4gICAgbmV3IFN0cmF0ZWd5KFxuICAgICAge1xuICAgICAgICB1c2VybmFtZUZpZWxkOiBcImVtYWlsXCIsXG4gICAgICAgIHBhc3N3b3JkRmllbGQ6IFwicGFzc3dvcmRcIixcbiAgICAgIH0sXG4gICAgICBmdW5jdGlvbiAoZW1haWwsIHBhc3N3b3JkLCBkb25lKSB7XG4gICAgICAgIHJldHVybiBBdXRoZW50aWNhdGUodXNlciwgZW1haWwsIHBhc3N3b3JkLCBkb25lKTtcbiAgICAgIH1cbiAgICApXG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBzZXRVcDtcbiJdLCJuYW1lcyI6WyJwYXNzcG9ydCIsIlN0cmF0ZWd5IiwiY29tcGFyZVBhc3N3b3JkcyIsImdlbmVyYXRlVG9rZW4iLCJBdXRoZW50aWNhdGUiLCJ1c2VyIiwiZW1haWwiLCJwYXNzd29yZCIsImRvbmUiLCJjb25zb2xlIiwibG9nIiwiZmluZE9uZSIsInRoZW4iLCJ1c2VycyIsInVuZGVmaW5lZCIsIm1lc3NhZ2UiLCJ0b1N0cmluZyIsImxlbmd0aCIsInZlcmlmeSIsInN0YXR1cyIsInNhbHQiLCJjaGVja1B3ZCIsInRva2VuIiwibmV3VXNlciIsImZpbmRPbmVBbmRVcGRhdGUiLCJfb2JqZWN0U3ByZWFkIiwiX2RvYyIsImNhdGNoIiwiZXJyIiwic2V0VXAiLCJ1c2UiLCJ1c2VybmFtZUZpZWxkIiwicGFzc3dvcmRGaWVsZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/server/auth/passport/local.js\n");

/***/ }),

/***/ "(api)/./src/server/common/db.js":
/*!*********************************!*\
  !*** ./src/server/common/db.js ***!
  \*********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var _settings_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./settings.js */ \"(api)/./src/server/common/settings.js\");\n\n\nconst MONGODB_URI = _settings_js__WEBPACK_IMPORTED_MODULE_1__.MONGO_URL;\nif (!MONGODB_URI) {\n  throw new Error('Please define the MONGODB_URI environment variable inside .env.local');\n}\nlet cached = global.mongoose;\nif (!cached) {\n  cached = global.mongoose = {\n    conn: null,\n    promise: null\n  };\n}\nasync function dbConnect() {\n  if (cached.conn) {\n    return cached.conn;\n  }\n  if (!cached.promise) {\n    cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0__.connect(MONGODB_URI, {\n      useNewUrlParser: true,\n      useUnifiedTopology: true\n    }).then(mongoose => {\n      return mongoose;\n    });\n  }\n  cached.conn = await cached.promise;\n  return cached.conn;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dbConnect);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2NvbW1vbi9kYi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0M7QUFDVTtBQUUxQyxNQUFNRSxXQUFXLEdBQUdELG1EQUFTO0FBRTdCLElBQUksQ0FBQ0MsV0FBVyxFQUFFO0VBQ2hCLE1BQU0sSUFBSUMsS0FBSyxDQUFDLHNFQUFzRSxDQUFDO0FBQ3pGO0FBRUEsSUFBSUMsTUFBTSxHQUFHQyxNQUFNLENBQUNMLFFBQVE7QUFFNUIsSUFBSSxDQUFDSSxNQUFNLEVBQUU7RUFDWEEsTUFBTSxHQUFHQyxNQUFNLENBQUNMLFFBQVEsR0FBRztJQUFFTSxJQUFJLEVBQUUsSUFBSTtJQUFFQyxPQUFPLEVBQUU7RUFBSyxDQUFDO0FBQzFEO0FBRUEsZUFBZUMsU0FBU0EsQ0FBQSxFQUFHO0VBQ3pCLElBQUlKLE1BQU0sQ0FBQ0UsSUFBSSxFQUFFO0lBQ2YsT0FBT0YsTUFBTSxDQUFDRSxJQUFJO0VBQ3BCO0VBRUEsSUFBSSxDQUFDRixNQUFNLENBQUNHLE9BQU8sRUFBRTtJQUNuQkgsTUFBTSxDQUFDRyxPQUFPLEdBQUdQLDZDQUFnQixDQUFDRSxXQUFXLEVBQUU7TUFDN0NRLGVBQWUsRUFBRSxJQUFJO01BQ3JCQyxrQkFBa0IsRUFBRTtJQUN0QixDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFFWixRQUFRLElBQUs7TUFDcEIsT0FBT0EsUUFBUTtJQUNqQixDQUFDLENBQUM7RUFDSjtFQUNBSSxNQUFNLENBQUNFLElBQUksR0FBRyxNQUFNRixNQUFNLENBQUNHLE9BQU87RUFDbEMsT0FBT0gsTUFBTSxDQUFDRSxJQUFJO0FBQ3BCO0FBRUEsaUVBQWVFLFNBQVMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtYXV0aC8uL3NyYy9zZXJ2ZXIvY29tbW9uL2RiLmpzP2YzYzAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCB7IE1PTkdPX1VSTCB9IGZyb20gJy4vc2V0dGluZ3MuanMnO1xuXG5jb25zdCBNT05HT0RCX1VSSSA9IE1PTkdPX1VSTDtcblxuaWYgKCFNT05HT0RCX1VSSSkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBkZWZpbmUgdGhlIE1PTkdPREJfVVJJIGVudmlyb25tZW50IHZhcmlhYmxlIGluc2lkZSAuZW52LmxvY2FsJyk7XG59XG5cbmxldCBjYWNoZWQgPSBnbG9iYWwubW9uZ29vc2U7XG5cbmlmICghY2FjaGVkKSB7XG4gIGNhY2hlZCA9IGdsb2JhbC5tb25nb29zZSA9IHsgY29ubjogbnVsbCwgcHJvbWlzZTogbnVsbCB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBkYkNvbm5lY3QoKSB7XG4gIGlmIChjYWNoZWQuY29ubikge1xuICAgIHJldHVybiBjYWNoZWQuY29ubjtcbiAgfVxuXG4gIGlmICghY2FjaGVkLnByb21pc2UpIHtcbiAgICBjYWNoZWQucHJvbWlzZSA9IG1vbmdvb3NlLmNvbm5lY3QoTU9OR09EQl9VUkksIHtcbiAgICAgIHVzZU5ld1VybFBhcnNlcjogdHJ1ZSxcbiAgICAgIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSxcbiAgICB9KS50aGVuKChtb25nb29zZSkgPT4ge1xuICAgICAgcmV0dXJuIG1vbmdvb3NlO1xuICAgIH0pO1xuICB9XG4gIGNhY2hlZC5jb25uID0gYXdhaXQgY2FjaGVkLnByb21pc2U7XG4gIHJldHVybiBjYWNoZWQuY29ubjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZGJDb25uZWN0OyJdLCJuYW1lcyI6WyJtb25nb29zZSIsIk1PTkdPX1VSTCIsIk1PTkdPREJfVVJJIiwiRXJyb3IiLCJjYWNoZWQiLCJnbG9iYWwiLCJjb25uIiwicHJvbWlzZSIsImRiQ29ubmVjdCIsImNvbm5lY3QiLCJ1c2VOZXdVcmxQYXJzZXIiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJ0aGVuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/server/common/db.js\n");

/***/ }),

/***/ "(api)/./src/server/common/settings.js":
/*!***************************************!*\
  !*** ./src/server/common/settings.js ***!
  \***************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JWT_SECRET: () => (/* binding */ JWT_SECRET),\n/* harmony export */   MONGO_PASS: () => (/* binding */ MONGO_PASS),\n/* harmony export */   MONGO_URL: () => (/* binding */ MONGO_URL),\n/* harmony export */   MONGO_USER: () => (/* binding */ MONGO_USER),\n/* harmony export */   NODE_ENV: () => (/* binding */ NODE_ENV),\n/* harmony export */   PORT: () => (/* binding */ PORT),\n/* harmony export */   SECRET_TOKEN: () => (/* binding */ SECRET_TOKEN)\n/* harmony export */ });\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! dotenv */ \"dotenv\");\n\n\n\nconst env = \"development\";\nconst envFile = `.env.${env}`;\nconsole.log(`envFile: ${envFile}`);\nif (fs__WEBPACK_IMPORTED_MODULE_1__.existsSync(envFile)) {\n  console.log(`Using ${envFile} file to supply config environment variables`);\n  dotenv__WEBPACK_IMPORTED_MODULE_2__.config({\n    path: envFile\n  });\n}\nconst PORT = process.env.PORT || \"\";\nconst NODE_ENV = \"development\" || 0;\nconst MONGO_URL = process.env.MONGO_URL || \"\";\nconst MONGO_USER = process.env.MONGO_USER || \"\";\nconst MONGO_PASS = process.env.MONGO_PASS || \"\";\nconst JWT_SECRET = process.env.JWT_SECRET || \"\";\nconst SECRET_TOKEN = process.env.SECRET_TOKEN || \"\";\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2NvbW1vbi9zZXR0aW5ncy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQXdCO0FBQ0o7QUFDUTtBQUU1QixNQUFNRyxHQUFHLGdCQUF1QjtBQUNoQyxNQUFNQyxPQUFPLEdBQUksUUFBT0QsR0FBSSxFQUFDO0FBQzdCRSxPQUFPLENBQUNDLEdBQUcsQ0FBRSxZQUFXRixPQUFRLEVBQUMsQ0FBQztBQUNsQyxJQUFJSCwwQ0FBYSxDQUFDRyxPQUFPLENBQUMsRUFBRTtFQUMxQkMsT0FBTyxDQUFDQyxHQUFHLENBQUUsU0FBUUYsT0FBUSw4Q0FBNkMsQ0FBQztFQUMzRUYsMENBQWEsQ0FBQztJQUFFRixJQUFJLEVBQUVJO0VBQVEsQ0FBQyxDQUFDO0FBQ2xDO0FBRUEsTUFBTUssSUFBSSxHQUFHQyxPQUFPLENBQUNQLEdBQUcsQ0FBQ00sSUFBSSxJQUFJLEVBQUU7QUFDbkMsTUFBTUUsUUFBUSxHQUFHLGlCQUF3QixDQUFFO0FBQzNDLE1BQU1DLFNBQVMsR0FBR0YsT0FBTyxDQUFDUCxHQUFHLENBQUNTLFNBQVMsSUFBSSxFQUFFO0FBQzdDLE1BQU1DLFVBQVUsR0FBR0gsT0FBTyxDQUFDUCxHQUFHLENBQUNVLFVBQVUsSUFBSSxFQUFFO0FBQy9DLE1BQU1DLFVBQVUsR0FBR0osT0FBTyxDQUFDUCxHQUFHLENBQUNXLFVBQVUsSUFBSSxFQUFFO0FBQy9DLE1BQU1DLFVBQVUsR0FBR0wsT0FBTyxDQUFDUCxHQUFHLENBQUNZLFVBQVUsSUFBSSxFQUFFO0FBQy9DLE1BQU1DLFlBQVksR0FBR04sT0FBTyxDQUFDUCxHQUFHLENBQUNhLFlBQVksSUFBSSxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLWF1dGgvLi9zcmMvc2VydmVyL2NvbW1vbi9zZXR0aW5ncy5qcz8yZmFmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgZnMgZnJvbSBcImZzXCI7XG5pbXBvcnQgZG90ZW52IGZyb20gXCJkb3RlbnZcIjtcblxuY29uc3QgZW52ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlY7XG5jb25zdCBlbnZGaWxlID0gYC5lbnYuJHtlbnZ9YDtcbmNvbnNvbGUubG9nKGBlbnZGaWxlOiAke2VudkZpbGV9YCk7XG5pZiAoZnMuZXhpc3RzU3luYyhlbnZGaWxlKSkge1xuICBjb25zb2xlLmxvZyhgVXNpbmcgJHtlbnZGaWxlfSBmaWxlIHRvIHN1cHBseSBjb25maWcgZW52aXJvbm1lbnQgdmFyaWFibGVzYCk7XG4gIGRvdGVudi5jb25maWcoeyBwYXRoOiBlbnZGaWxlIH0pO1xufVxuXG5jb25zdCBQT1JUID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCBcIlwiO1xuY29uc3QgTk9ERV9FTlYgPSBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCBcIlwiO1xuY29uc3QgTU9OR09fVVJMID0gcHJvY2Vzcy5lbnYuTU9OR09fVVJMIHx8IFwiXCI7XG5jb25zdCBNT05HT19VU0VSID0gcHJvY2Vzcy5lbnYuTU9OR09fVVNFUiB8fCBcIlwiO1xuY29uc3QgTU9OR09fUEFTUyA9IHByb2Nlc3MuZW52Lk1PTkdPX1BBU1MgfHwgXCJcIjtcbmNvbnN0IEpXVF9TRUNSRVQgPSBwcm9jZXNzLmVudi5KV1RfU0VDUkVUIHx8IFwiXCI7XG5jb25zdCBTRUNSRVRfVE9LRU4gPSBwcm9jZXNzLmVudi5TRUNSRVRfVE9LRU4gfHwgXCJcIjtcblxuZXhwb3J0IHtcbiAgUE9SVCxcbiAgTk9ERV9FTlYsXG4gIE1PTkdPX1VSTCxcbiAgTU9OR09fVVNFUixcbiAgTU9OR09fUEFTUyxcbiAgSldUX1NFQ1JFVCxcbiAgU0VDUkVUX1RPS0VOLFxufTtcbiJdLCJuYW1lcyI6WyJwYXRoIiwiZnMiLCJkb3RlbnYiLCJlbnYiLCJlbnZGaWxlIiwiY29uc29sZSIsImxvZyIsImV4aXN0c1N5bmMiLCJjb25maWciLCJQT1JUIiwicHJvY2VzcyIsIk5PREVfRU5WIiwiTU9OR09fVVJMIiwiTU9OR09fVVNFUiIsIk1PTkdPX1BBU1MiLCJKV1RfU0VDUkVUIiwiU0VDUkVUX1RPS0VOIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/server/common/settings.js\n");

/***/ }),

/***/ "(api)/./src/server/controller/auth.controller.js":
/*!**************************************************!*\
  !*** ./src/server/controller/auth.controller.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var passport__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! passport */ \"passport\");\n/* harmony import */ var _model_user_model_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../model/user.model.js */ \"(api)/./src/server/model/user.model.js\");\n/* harmony import */ var _auth_passport_local_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../auth/passport/local.js */ \"(api)/./src/server/auth/passport/local.js\");\n\n\n\npassport__WEBPACK_IMPORTED_MODULE_0__.serializeUser((user, done) => {\n  done(null, user);\n});\npassport__WEBPACK_IMPORTED_MODULE_0__.deserializeUser((user, done) => {\n  done(null, user);\n});\n(0,_auth_passport_local_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(_model_user_model_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\nconst authController = {\n  signin: async args => {\n    return new Promise((resolve, reject) => {\n      passport__WEBPACK_IMPORTED_MODULE_0__.authenticate(\"local\", (err, user, info) => {\n        if (err) {\n          reject(err);\n        }\n        if (!user) {\n          reject(info);\n        }\n        resolve(user);\n      })({\n        body: args\n      }, {});\n    });\n  },\n  signout: async args => {\n    return await _model_user_model_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findByIdAndUpdate({\n      _id: args?._id\n    }, {\n      token: null,\n      updatedOn: new Date()\n    }, {\n      new: true\n    });\n  }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (authController);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2NvbnRyb2xsZXIvYXV0aC5jb250cm9sbGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBZ0M7QUFDVTtBQUNJO0FBRTlDQSxtREFBc0IsQ0FBQyxDQUFDSSxJQUFJLEVBQUVDLElBQUksS0FBSztFQUNyQ0EsSUFBSSxDQUFDLElBQUksRUFBRUQsSUFBSSxDQUFDO0FBQ2xCLENBQUMsQ0FBQztBQUVGSixxREFBd0IsQ0FBQyxDQUFDSSxJQUFJLEVBQUVDLElBQUksS0FBSztFQUN2Q0EsSUFBSSxDQUFDLElBQUksRUFBRUQsSUFBSSxDQUFDO0FBQ2xCLENBQUMsQ0FBQztBQUVGRixtRUFBSyxDQUFDRCw0REFBSSxDQUFDO0FBRVgsTUFBTU0sY0FBYyxHQUFHO0VBQ3JCQyxNQUFNLEVBQUUsTUFBT0MsSUFBSSxJQUFLO0lBQ3RCLE9BQU8sSUFBSUMsT0FBTyxDQUFDLENBQUNDLE9BQU8sRUFBRUMsTUFBTSxLQUFLO01BQ3RDWixrREFBcUIsQ0FBQyxPQUFPLEVBQUUsQ0FBQ2MsR0FBRyxFQUFFVixJQUFJLEVBQUVXLElBQUksS0FBSztRQUNsRCxJQUFJRCxHQUFHLEVBQUU7VUFDUEYsTUFBTSxDQUFDRSxHQUFHLENBQUM7UUFDYjtRQUNBLElBQUksQ0FBQ1YsSUFBSSxFQUFFO1VBQ1RRLE1BQU0sQ0FBQ0csSUFBSSxDQUFDO1FBQ2Q7UUFDQUosT0FBTyxDQUFDUCxJQUFJLENBQUM7TUFDZixDQUFDLENBQUMsQ0FBQztRQUFFWSxJQUFJLEVBQUVQO01BQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3hCLENBQUMsQ0FBQztFQUNKLENBQUM7RUFDRFEsT0FBTyxFQUFFLE1BQU9SLElBQUksSUFBSztJQUN2QixPQUFPLE1BQU1SLDhFQUFzQixDQUNqQztNQUFFa0IsR0FBRyxFQUFFVixJQUFJLEVBQUVVO0lBQUksQ0FBQyxFQUNsQjtNQUFFQyxLQUFLLEVBQUUsSUFBSTtNQUFFQyxTQUFTLEVBQUUsSUFBSUMsSUFBSSxDQUFDO0lBQUUsQ0FBQyxFQUN0QztNQUFFQyxHQUFHLEVBQUU7SUFBSyxDQUNkLENBQUM7RUFDSDtBQUNGLENBQUM7QUFFRCxpRUFBZWhCLGNBQWMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtYXV0aC8uL3NyYy9zZXJ2ZXIvY29udHJvbGxlci9hdXRoLmNvbnRyb2xsZXIuanM/MWNiMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGFzc3BvcnQgZnJvbSBcInBhc3Nwb3J0XCI7XG5pbXBvcnQgVXNlciBmcm9tIFwiLi4vbW9kZWwvdXNlci5tb2RlbC5qc1wiO1xuaW1wb3J0IHNldFVwIGZyb20gXCIuLi9hdXRoL3Bhc3Nwb3J0L2xvY2FsLmpzXCI7XG5cbnBhc3Nwb3J0LnNlcmlhbGl6ZVVzZXIoKHVzZXIsIGRvbmUpID0+IHtcbiAgZG9uZShudWxsLCB1c2VyKTtcbn0pO1xuXG5wYXNzcG9ydC5kZXNlcmlhbGl6ZVVzZXIoKHVzZXIsIGRvbmUpID0+IHtcbiAgZG9uZShudWxsLCB1c2VyKTtcbn0pO1xuXG5zZXRVcChVc2VyKTtcblxuY29uc3QgYXV0aENvbnRyb2xsZXIgPSB7XG4gIHNpZ25pbjogYXN5bmMgKGFyZ3MpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgcGFzc3BvcnQuYXV0aGVudGljYXRlKFwibG9jYWxcIiwgKGVyciwgdXNlciwgaW5mbykgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgcmVqZWN0KGluZm8pO1xuICAgICAgICB9XG4gICAgICAgIHJlc29sdmUodXNlcik7XG4gICAgICB9KSh7IGJvZHk6IGFyZ3MgfSwge30pO1xuICAgIH0pO1xuICB9LFxuICBzaWdub3V0OiBhc3luYyAoYXJncykgPT4ge1xuICAgIHJldHVybiBhd2FpdCBVc2VyLmZpbmRCeUlkQW5kVXBkYXRlKFxuICAgICAgeyBfaWQ6IGFyZ3M/Ll9pZCB9LFxuICAgICAgeyB0b2tlbjogbnVsbCwgdXBkYXRlZE9uOiBuZXcgRGF0ZSgpIH0sXG4gICAgICB7IG5ldzogdHJ1ZSB9XG4gICAgKTtcbiAgfSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGF1dGhDb250cm9sbGVyO1xuIl0sIm5hbWVzIjpbInBhc3Nwb3J0IiwiVXNlciIsInNldFVwIiwic2VyaWFsaXplVXNlciIsInVzZXIiLCJkb25lIiwiZGVzZXJpYWxpemVVc2VyIiwiYXV0aENvbnRyb2xsZXIiLCJzaWduaW4iLCJhcmdzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJhdXRoZW50aWNhdGUiLCJlcnIiLCJpbmZvIiwiYm9keSIsInNpZ25vdXQiLCJmaW5kQnlJZEFuZFVwZGF0ZSIsIl9pZCIsInRva2VuIiwidXBkYXRlZE9uIiwiRGF0ZSIsIm5ldyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/server/controller/auth.controller.js\n");

/***/ }),

/***/ "(api)/./src/server/model/user.model.js":
/*!****************************************!*\
  !*** ./src/server/model/user.model.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n\nconst UserSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n  password: {\n    type: String,\n    required: true\n  },\n  salt: {\n    type: String,\n    required: true\n  },\n  email: {\n    type: String,\n    required: true,\n    unique: true\n  },\n  role: {\n    type: String,\n    default: \"user\"\n  },\n  firstName: {\n    type: String\n  },\n  lastName: {\n    type: String\n  },\n  phone: {\n    type: String\n  },\n  createdOn: {\n    type: Date,\n    default: Date.now\n  },\n  updatedOn: {\n    type: Date,\n    default: Date.now\n  },\n  verify: {\n    status: {\n      type: Boolean,\n      default: false\n    },\n    token: {\n      type: String\n    }\n  },\n  approveBy: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.ObjectId\n  },\n  token: {\n    type: String\n  }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (mongoose__WEBPACK_IMPORTED_MODULE_0__.models.users || mongoose__WEBPACK_IMPORTED_MODULE_0__.model(\"users\", UserSchema));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL21vZGVsL3VzZXIubW9kZWwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBNEM7QUFFNUMsTUFBTUUsVUFBVSxHQUFHLElBQUlGLDRDQUFlLENBQUM7RUFDckNHLFFBQVEsRUFBRTtJQUNSQyxJQUFJLEVBQUVDLE1BQU07SUFDWkMsUUFBUSxFQUFFO0VBQ1osQ0FBQztFQUNEQyxJQUFJLEVBQUU7SUFDSkgsSUFBSSxFQUFFQyxNQUFNO0lBQ1pDLFFBQVEsRUFBRTtFQUNaLENBQUM7RUFDREUsS0FBSyxFQUFFO0lBQ0xKLElBQUksRUFBRUMsTUFBTTtJQUNaQyxRQUFRLEVBQUUsSUFBSTtJQUNkRyxNQUFNLEVBQUU7RUFDVixDQUFDO0VBQ0RDLElBQUksRUFBRTtJQUNKTixJQUFJLEVBQUVDLE1BQU07SUFDWk0sT0FBTyxFQUFFO0VBQ1gsQ0FBQztFQUNEQyxTQUFTLEVBQUU7SUFDVFIsSUFBSSxFQUFFQztFQUNSLENBQUM7RUFDRFEsUUFBUSxFQUFFO0lBQ1JULElBQUksRUFBRUM7RUFDUixDQUFDO0VBQ0RTLEtBQUssRUFBRTtJQUNMVixJQUFJLEVBQUVDO0VBQ1IsQ0FBQztFQUNEVSxTQUFTLEVBQUU7SUFDVFgsSUFBSSxFQUFFWSxJQUFJO0lBQ1ZMLE9BQU8sRUFBRUssSUFBSSxDQUFDQztFQUNoQixDQUFDO0VBQ0RDLFNBQVMsRUFBRTtJQUNUZCxJQUFJLEVBQUVZLElBQUk7SUFDVkwsT0FBTyxFQUFFSyxJQUFJLENBQUNDO0VBQ2hCLENBQUM7RUFDREUsTUFBTSxFQUFFO0lBQ05DLE1BQU0sRUFBRTtNQUNOaEIsSUFBSSxFQUFFaUIsT0FBTztNQUNiVixPQUFPLEVBQUU7SUFDWCxDQUFDO0lBQ0RXLEtBQUssRUFBRTtNQUNMbEIsSUFBSSxFQUFFQztJQUNSO0VBQ0YsQ0FBQztFQUNEa0IsU0FBUyxFQUFFO0lBQ1RuQixJQUFJLEVBQUVILDRDQUFNLENBQUN1QjtFQUNmLENBQUM7RUFDREYsS0FBSyxFQUFFO0lBQ0xsQixJQUFJLEVBQUVDO0VBQ1I7QUFDRixDQUFDLENBQUM7QUFFRixpRUFBZUwsNENBQWUsQ0FBQzBCLEtBQUssSUFBSTFCLDJDQUFjLENBQUMsT0FBTyxFQUFFRSxVQUFVLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtYXV0aC8uL3NyYy9zZXJ2ZXIvbW9kZWwvdXNlci5tb2RlbC5qcz8wMTI4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSwgeyBTY2hlbWEgfSBmcm9tIFwibW9uZ29vc2VcIjtcblxuY29uc3QgVXNlclNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICBwYXNzd29yZDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbiAgc2FsdDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbiAgZW1haWw6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgdW5pcXVlOiB0cnVlLFxuICB9LFxuICByb2xlOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGRlZmF1bHQ6IFwidXNlclwiLFxuICB9LFxuICBmaXJzdE5hbWU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gIH0sXG4gIGxhc3ROYW1lOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICB9LFxuICBwaG9uZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgfSxcbiAgY3JlYXRlZE9uOiB7XG4gICAgdHlwZTogRGF0ZSxcbiAgICBkZWZhdWx0OiBEYXRlLm5vdyxcbiAgfSxcbiAgdXBkYXRlZE9uOiB7XG4gICAgdHlwZTogRGF0ZSxcbiAgICBkZWZhdWx0OiBEYXRlLm5vdyxcbiAgfSxcbiAgdmVyaWZ5OiB7XG4gICAgc3RhdHVzOiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgZGVmYXVsdDogZmFsc2UsXG4gICAgfSxcbiAgICB0b2tlbjoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgIH0sXG4gIH0sXG4gIGFwcHJvdmVCeToge1xuICAgIHR5cGU6IFNjaGVtYS5PYmplY3RJZCxcbiAgfSxcbiAgdG9rZW46IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gIH0sXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgbW9uZ29vc2UubW9kZWxzLnVzZXJzIHx8IG1vbmdvb3NlLm1vZGVsKFwidXNlcnNcIiwgVXNlclNjaGVtYSk7XG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJTY2hlbWEiLCJVc2VyU2NoZW1hIiwicGFzc3dvcmQiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJzYWx0IiwiZW1haWwiLCJ1bmlxdWUiLCJyb2xlIiwiZGVmYXVsdCIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwicGhvbmUiLCJjcmVhdGVkT24iLCJEYXRlIiwibm93IiwidXBkYXRlZE9uIiwidmVyaWZ5Iiwic3RhdHVzIiwiQm9vbGVhbiIsInRva2VuIiwiYXBwcm92ZUJ5IiwiT2JqZWN0SWQiLCJtb2RlbHMiLCJ1c2VycyIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/server/model/user.model.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fsignin&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cauth%5Csignin.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();